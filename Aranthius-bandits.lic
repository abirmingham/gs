$AZ_BANDIT_ATTACK.call(
  Proc.new do |targets|
    start_room = Room.current.id
    fput 'stance off' until checkstance == 'offensive'
    if start_room == Room.current.id
      if targets.length >= 2 && checkmana >= 40
        fput 'incant 518 air'
      elsif checkmana >= 20
        fput 'incant 903'
      end
    end
  end
)
